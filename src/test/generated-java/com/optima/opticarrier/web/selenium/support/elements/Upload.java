/*
 * (c) Copyright 2005-2013 JAXIO, http://www.jaxio.com
 * Source code generated by Celerio, a Jaxio product
 * Want to purchase Celerio ? email us at info@jaxio.com
 * Follow us on twitter: @springfuse
 * Documentation: http://www.jaxio.com/documentation/celerio/
 * Template pack-selenium-primefaces:src/test/java/selenium/support/element/Upload.p.vm.java
 */
package com.optima.opticarrier.web.selenium.support.elements;

import org.openqa.selenium.WebElement;

import java.io.File;

public class Upload extends ByCustomWebElement {
    private final String jsId;

    public Upload(String id) {
        super(id + "_input");
        jsId = "#" + id.replace(":", "\\\\:");
    }

    public void upload(String filename) {
        upload(new File(filename));
    }

    public void upload(File file) {
        String cssQuery = jsId + ", .ui-fileupload-choose";

        // remove these css elements on upload buttons as they are not visible
        // basically primefaces uses hacks to display a nice button, and we have to deal with it

        setCss(cssQuery, "position", "initial");
        setCss(cssQuery, "opacity", "1");
        setCss(cssQuery, "fontSize", "7px");
        setCss(cssQuery, "transform", "none");
        setCss(cssQuery, "filter", "none");

        WebElement upload = webClient.find(by);
        upload.sendKeys(file.getAbsolutePath());
    }

    private String setCss(String cssQuery, String css, String value) {
        return webClient.executeJs("$('" + cssQuery + "').css('" + css + "', '" + value + "');");
    }
}
