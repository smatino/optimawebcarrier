<!--
 ! (c) Copyright 2005-2013 JAXIO, http://www.jaxio.com
 ! Source code generated by Celerio, a Jaxio product
 ! Want to purchase Celerio ? email us at info@jaxio.com
 ! Follow us on twitter: @springfuse
 ! Documentation: http://www.jaxio.com/documentation/celerio/
 ! Template pack-jsf2-spring-conversation:src/main/webapp/WEB-INF/layouts/main.p.vm.xhtml
-->
<f:view xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:c="http://java.sun.com/jsp/jstl/core"
		xmlns:p="http://primefaces.org/ui"
		xmlns:app="http://springfuse.jaxio.com/app"
		xmlns:appcc="http://java.sun.com/jsf/composite/components"
		contentType="text/html"
		encoding="UTF-8"
		lang="#{localeService.locale}">
	<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="#{localeService.locale}" lang="#{localeService.locale}">
	<h:head>
		<f:facet name="first">
			<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
			<meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
			<title>#{empty title? msg.main_title : resourcesUtil.getProperty(title)}</title>
		</f:facet>
		<f:facet name="last">
			<h:outputStylesheet name="css/main.css" />
			<h:outputScript name="js/main.js" />
			<h:outputScript name="js/primefaces-locale.js" />
		</f:facet>
	</h:head>
	<h:body>
		<p:growl widgetVar="growlNotificationBar" showDetail="true" sticky="false" life="1500" for="seleniumOnly" />
		<div class="environment #{environmentService.environment}"/>
		<h:form id="form" enctype="multipart/form-data; charset=utf-8" prependId="#{empty prependId or prependId}">
			<!-- regular layout (does not work with chromeshades) -->
			<p:layout fullPage="true" >
				<p:layoutUnit id="top" position="north" resizable="false" size="120">
					<div role="banner">
						<table width="100%">
							<tr>
								<td width="179px">
									<h:outputLink value="/optimawebcarrier/home.faces" title="Optima Carrier"><div class="logo"/></h:outputLink>
								    <h:outputText class="version" value="#{versionService.format()}" />
								</td>
								<td width="70%" align="center">
									<h1>Optima Carrier</h1>
								</td>
								<td class="userInfo">
									<h:outputText value="#{userContextService.username} #{userContextService.roles}" styleClass="userInfo-username" rendered="#{userContextService.isLoggedIn()}"/>
									<h:outputLink id="login_link" value="#{facesContext.externalContext.requestContextPath}/login.faces" styleClass="userInfo-user" rendered="#{userContextService.isAnonymousUser()}">#{msg.login}</h:outputLink>
									<h:outputLink id="logout_link" value="#{facesContext.externalContext.requestContextPath}/logout.faces" styleClass="userInfo-user" rendered="#{userContextService.isLoggedIn()}">#{msg.logout}</h:outputLink>
									<h:outputLink id="home_link" value="#{facesContext.externalContext.requestContextPath}/home.faces" styleClass="userInfo-welcome">#{msg.home}</h:outputLink>
									<p:commandLink id="switchToFrench" action="#{localeService.switchToFrench()}" styleClass="userInfo-fr" rendered="#{!localeService.isFrench()}" ajax="false"/>
									<p:commandLink id="switchToEnglish" action="#{localeService.switchToEnglish()}" styleClass="userInfo-en" rendered="#{localeService.isFrench()}" ajax="false"/>
									<h:outputLink value="#{facesContext.externalContext.requestContextPath}/monitoring" rendered="#{userContextService.hasRole('ROLE_MONITORING')}">Monitoring</h:outputLink>
								</td>
							</tr>
						</table>
					</div>
					<div role="navigation">
						<p:toolbar>
							<ui:insert name="toolbarChildren"/>
							<p:toolbarGroup align="right">
								<p:menuButton
									value="#{resourcesUtil.getPluralableProperty('menu_active_flows', conversationManager.nbConversations)}"
									model="#{conversationMenu.model}" 
									rendered="#{conversationMenu.render}"/>
								<p:menuButton value="Domain">
									<p:menuitem value="#{msg.btRequest}" action="#{btRequestController.beginSearch()}" rendered="#{btRequestPermission.canSearch()}" />
									<p:menuitem value="#{msg.cpsDeactivationNotification}" action="#{cpsDeactivationNotificationController.beginSearch()}" rendered="#{cpsDeactivationNotificationPermission.canSearch()}" />
									<p:menuitem value="#{msg.cpsDeactivationPrenotification}" action="#{cpsDeactivationPrenotificationController.beginSearch()}" rendered="#{cpsDeactivationPrenotificationPermission.canSearch()}" />
									<p:menuitem value="#{msg.cpsQuoteRequest}" action="#{cpsQuoteRequestController.beginSearch()}" rendered="#{cpsQuoteRequestPermission.canSearch()}" />
									<p:menuitem value="#{msg.cpsQuoteResponse}" action="#{cpsQuoteResponseController.beginSearch()}" rendered="#{cpsQuoteResponsePermission.canSearch()}" />
									<p:menuitem value="#{msg.cpsQuoteResponsePenali}" action="#{cpsQuoteResponsePenaliController.beginSearch()}" rendered="#{cpsQuoteResponsePenaliPermission.canSearch()}" />
									<p:menuitem value="#{msg.oloCps}" action="#{oloCpsController.beginSearch()}" rendered="#{oloCpsPermission.canSearch()}" />
									<p:menuitem value="#{msg.prefissi}" action="#{prefissiController.beginSearch()}" rendered="#{prefissiPermission.canSearch()}" />
									<p:menuitem value="#{msg.response}" action="#{responseController.beginSearch()}" rendered="#{responsePermission.canSearch()}" />
									<p:menuitem value="#{msg.sbcCpsRequest}" action="#{sbcCpsRequestController.beginSearch()}" rendered="#{sbcCpsRequestPermission.canSearch()}" />
									<p:menuitem value="#{msg.sbcCpsResponse}" action="#{sbcCpsResponseController.beginSearch()}" rendered="#{sbcCpsResponsePermission.canSearch()}" />
									<p:menuitem value="#{msg.sbcFileRequest}" action="#{sbcFileRequestController.beginSearch()}" rendered="#{sbcFileRequestPermission.canSearch()}" />
									<p:menuitem value="#{msg.sbcFileResponse}" action="#{sbcFileResponseController.beginSearch()}" rendered="#{sbcFileResponsePermission.canSearch()}" />
									<p:menuitem value="#{msg.sbcWlrRequest}" action="#{sbcWlrRequestController.beginSearch()}" rendered="#{sbcWlrRequestPermission.canSearch()}" />
									<p:menuitem value="#{msg.sbcWlrRequestVariation}" action="#{sbcWlrRequestVariationController.beginSearch()}" rendered="#{sbcWlrRequestVariationPermission.canSearch()}" />
									<p:menuitem value="#{msg.sbcWlrResponse}" action="#{sbcWlrResponseController.beginSearch()}" rendered="#{sbcWlrResponsePermission.canSearch()}" />
									<p:menuitem value="#{msg.telecomFilePostfix}" action="#{telecomFilePostfixController.beginSearch()}" rendered="#{telecomFilePostfixPermission.canSearch()}" />
									<p:menuitem value="#{msg.wlrRequestAggiuntivis}" action="#{wlrRequestAggiuntivisController.beginSearch()}" rendered="#{wlrRequestAggiuntivisPermission.canSearch()}" />
									<p:menuitem value="#{msg.wlrServiceCode}" action="#{wlrServiceCodeController.beginSearch()}" rendered="#{wlrServiceCodePermission.canSearch()}" />
									<p:menuitem value="#{msg.wlrTraslocoCode}" action="#{wlrTraslocoCodeController.beginSearch()}" rendered="#{wlrTraslocoCodePermission.canSearch()}" />
                                    <p:menuitem value="#{msg.dbuRequest}" action="#{dbuRequestController.beginSearch()}" rendered="#{dbuRequestPermission.canSearch()}"/>
								</p:menuButton>
								<p:menuButton value="Debug" id="debug">
									<p:menuitem id="throwException" value="Throw exception" action="#{exceptionUtil.throwRuntimeException()}" process="@this" ajax="false" immediate="true" icon="ui-icon ui-icon-alert" />
									<p:menuitem id="throwAjaxException" value="Throw ajax exception" action="#{exceptionUtil.throwRuntimeException()}" update="messages" process="@this" ajax="true" immediate="true" icon="ui-icon ui-icon-alert" style="width:300px"/>
									<p:menuitem id="throwDataAccessException" value="Throw data access exception" action="#{exceptionUtil.throwDataAccessException()}" process="@this" ajax="false" immediate="true" icon="ui-icon ui-icon-alert" style="width:350px"/>
									<p:menuitem id="thowAjaxDataAccessException" value="Throw ajax data access exception" action="#{exceptionUtil.throwDataAccessException()}" update="messages" process="@this" ajax="true" immediate="true" icon="ui-icon ui-icon-alert" style="width:800px"/>
								</p:menuButton>
							</p:toolbarGroup>
						</p:toolbar>
						<p:outputPanel rendered="#{readonly}">
							<!-- give focus to cancel to ease keyboard navigation -->
							<script type="text/javascript">
								$(function() {
									setTimeout(function() {
										APP.focusTo('form:back');
									}, 200);
								});
							</script>
						</p:outputPanel>
					</div>
				</p:layoutUnit>
				<p:layoutUnit id="center" position="center">
					<div id="messagesRegion" aria-label="form feedback" aria-live="assertive" aria-relevant="additions">
						<appcc:messages id="messages" rendered="#{empty disableMessages or not disableMessages}" />
					</div>
					<p:focus context="center" rendered="#{messagesHelper.hasNoMessages()}" />
					<ui:insert name="content"/>
				</p:layoutUnit>
				<p:layoutUnit id="bottom" position="south" size="30">
					<p:outputPanel layout="block" rendered="#{!localeService.isFrench()}">
						© 2005-2013 <a href="http://www.jaxio.com/" target="blank">Matino</a>
					</p:outputPanel>
					<p:outputPanel layout="block" rendered="#{localeService.isFrench()}">
						© 2005-2013 <a href="http://www.jaxio.com/" target="blank">Matino</a>
					</p:outputPanel>
				</p:layoutUnit>
			</p:layout>
			<ui:insert name="dialogs"/>
		</h:form>
	</h:body>
	</html>
</f:view>